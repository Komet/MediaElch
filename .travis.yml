language: generic
matrix:
  include:
  - env: QT=qtMac CXX=clang++ CC=clang
    os: osx
  - env: QT=qt510 QT_PPA=qt-5.10.1 CXX=g++ CC=gcc
    os: linux
  - env: QT=qt55 QT_PPA=qt551 CXX=g++ CC=gcc
    os: linux
  - env: QT=qtWin
    os: linux

dist: trusty
sudo: required

branches:
  only:
  - master
  - release

install:
- "${TRAVIS_BUILD_DIR}/travis-ci/install_dependencies.sh"

before_script:
- "${TRAVIS_BUILD_DIR}/travis-ci/configure.sh"

script:
- if [ $QT = qtWin ]; then PATH=$PATH:/usr/lib/mxe/usr/bin; fi
- make -j 2

after_success:
- "${TRAVIS_BUILD_DIR}/travis-ci/package.sh"

deploy:
  provider: bintray
  skip_cleanup: true
  on:
    branch: master
    condition: -f ${TRAVIS_BUILD_DIR}/travis-ci/bintray.json
  user: bugwelle
  key:
    secure: r+LUmf0cgZsXBlYnlCmQZslST1G9gsVcPh82ZyOaMwSwJ+jmreBzAlrJSNqphlhbtWgp09ur9tNy7aJ6J/3jzS5IJw4XegnYEzkPxefL9ABgKrsaFZReTXCFgatctQVnuV2wX8l8Ng1UpcEXJu93CVx5va0KjYWAeQ++xdsFdF2yubxlHHso/ml8mpNZddxYBz/kRLhfCeZICcptp++YyEVU1/LwOoNFQ+fRrU11HuCRBos/CARRb/cA5rdxoSHAlEsBGPsJmMRplLQZdIrRMiy4eTzkx15tM6zEW0aFnm3fwNiA09Qsqxaho9kv8eh/ecwObfXyRG+MRZ5dKG6MCgFZ2EGyOx3g4cJdqhwT/09b3eVfMNZmBuN2ymGpOtyjYLDsly001IWS5OdYZz8TwJGQgj8qA8mIQgzG1mKDqVxFK+LoAyzCJr4QRfJAjRSKGFAg8waY6BFjE66qhRl+xbKrRKhWJ3putyZg5sMhQ+hVe4IEsyk8nNcB4UxgYbIi6ilclC6+a20eCnLKo0KfTtHV8YqoE0H/t/tRLcSnsR8teY1CHKqZQwnEsZ0dC/nkXCiv3+yJc4cNxvw40TpbPXMlCE3T6eaBP9vFnn0zeGC5yqMtYDPwd7ISNDHPLM3jVW3Ju/41V6h4gNhFZiU+ovk6nu4emvolEPTcM1p1QV0=
  file: ${TRAVIS_BUILD_DIR}/travis-ci/bintray.json
